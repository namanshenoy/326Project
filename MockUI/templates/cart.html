{% extends "base.html" %}
{% load static %}
{% block title %}<title>HOMEPAGE</title>{% endblock %}
{% block content %}
        <v-navigation-drawer
          clipped
          permanent
          width="250"
          stateless
          v-model="drawer"
          floating
          app
        >
          <v-list expand dense>
            <v-list-group v-model="storesDrawer">
              <v-list-tile slot="activator">
                <v-list-tile-content>
                  Stores
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="H and M"
                    v-model="hAndM"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Hollister"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="American Eagle"
                    v-model="americanEagle"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
            </v-list-group>
            <v-list-group  v-model="clothingTypeDrawer">
              <v-list-tile slot=activator>
                <v-list-tile-content>
                   Clothing Type
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                  <v-list-tile-content>
                    <v-checkbox
                      label="Pants"
                      v-model="hollister"
                    ></v-checkbox>
                  </v-list-tile-content>
                </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Shirts"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Shoes"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Socks"
                    v-model="socksType"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
            </v-list-group>

            <v-list-group v-model="sizeDrawer">
              <v-list-tile slot=activator>
                <v-list-tile-content>
                    Size
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                  <v-list-tile-content>
                    <v-checkbox
                      label="Extra Small"
                      v-model="hollister"
                    ></v-checkbox>
                  </v-list-tile-content>
                </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Small"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Medium"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Large"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-checkbox
                    label="Extra Large"
                    v-model="hollister"
                  ></v-checkbox>
                </v-list-tile-content>
              </v-list-tile>
            </v-list-group>
            <v-list-group>
              <v-list-tile slot="activator">
                <v-list-tile-content>
                  Price Range
                </v-list-tile-content>
              </v-list-tile>
              <v-list-tile>
                <v-list-tile-content>
                  <v-slider v-model="priceRange"  step="10"></v-slider>
                </v-list-tile-content>
              </v-list-tile>
            </v-list-group>

          </v-list>
        </v-navigation-drawer>
        <v-navigation-drawer
          clipped
          right
          width="250"
          permanent
          stateless
          v-model="drawer"
          floating
          app
        >
          <v-list>
            <v-list-tile  style="height:10vh">
              <v-list-tile-content  style="height:10vh">
                <v-card style="width:100%;">
                    <v-card-title>
                      <h1>Recommendations</h1>
                    </v-card-title>
                  </v-card>
              </v-list-tile-content>
            </v-list-tile>
          </v-list>

          <v-list two-line style="padding-top:10vh">
            <v-list-tile style="height:40vh">
              <v-list-tile-content style="height:40vh">
                <v-card style="width:100%;">
                  <v-card-media src="{% static 'images/jeans.jpg' %}" contain height="30vh"></v-card-media>
                  <v-card-title>
                    Buy these jeanse!
                  </v-card-title>
                </v-card>
              </v-list-tile-content>
            </v-list-tile>
            <v-list-tile style="height:40vh">
              <v-list-tile-content style="height:40vh">
                <v-card style="width:100%;">
                  <v-card-media src="{% static 'images/socks.jpg' %}" contain height="30vh"></v-card-media>
                  <v-card-title>
                    Buy these swacks!
                  </v-card-title>
                </v-card>
              </v-list-tile-content>
            </v-list-tile>
            <v-list-tile style="height:40vh">
              <v-list-tile-content style="height:40vh">
                <v-card style="width:100%;">
                  <v-card-media src="{% static 'images/socks.jpg' %}" contain height="30vh"></v-card-media>
                  <v-card-title>
                    Buy these swacks!
                  </v-card-title>
                </v-card>
              </v-list-tile-content>
            </v-list-tile>
            <v-list-tile style="height:40vh">
              <v-list-tile-content style="height:50vh">
                <v-card style="width:100%;">
                  <v-card-media src="{% static 'images/doctah.jpg' %}" contain height="30vh"></v-card-media>
                  <v-card-title>
                    YOU WON'T BELIEVE WHAT UHS DOES WITH THEIR HAMSTERS!!!!
                  </v-card-title>
                </v-card>
              </v-list-tile-content>
            </v-list-tile>
          </v-list>
        </v-navigation-drawer>
        <v-content  style="background:#ccc">
          <v-container>
            <v-layout row wrap>
              {% for item in cart.products.all %}
              <v-flex xs12 style="margin-top:10px;">
                <v-card hover  class="item-inner">
                  <v-card-text>
                    <v-layout>
                      <v-flex xs4 style="margin-left:-10%;">
                        <div class="jeans-card" style="background: url('{{ item.images.all.0.source }}'); background-position:center; background-repeat: no-repeat; background-size: contain;height: 100%"></div>
                      </v-flex>
                      <v-flex xs8>
                        <h2>{{item.name}}</h2>
                        <p>${{item.price|floatformat:2 }}</p>
                        <v-btn color="normal" href="" @click="productRoute('{{ item.id }}')">Go to Item</v-btn>
                        <v-btn color="error" href="" @click="removeFromCart({{item.id}})">Remove from Cart</v-btn>
                      </v-flex>
                    </v-layout>
                  </v-card-text>
                </v-card>
              </v-flex>
              {% empty %}
              <v-flex xs12 style="margin-top:10px;">
                  <v-card hover class="item-inner">
                    <v-card-text>
                      <v-layout>
                        <v-flex xs4 style="margin-left:-10%;">
                        </v-flex>
                        <v-flex xs8>
                          <h2> Looks like there are no items in cart!</h2>
                          <p>Please go to our home page and add an item!</p>
                        </v-flex>
                      </v-layout>
                    </v-card-text>
                  </v-card>
                </v-flex>
              {% endfor %}
              <v-flex xs4>
                {% if page_obj.has_previous %}
                  <a href="/home?page={{ page_obj.previous_page_number }}">previous</a>
                {% endif %}
                {% if page_obj.has_next %}
                  <a href="/home?page={{ page_obj.next_page_number }}">next</a>
                {% endif %}
              </v-flex>
            </v-layout>
          </v-container>
          <v-snackbar
            :timeout="2000"
            :top="true"
            :right="true"
            v-model="snackbar"
            :color="snackbarColor"
          >
            <span style="color:#eee">{? snackbarText ?}</span>
            <v-btn flat color="white" @click.native="snackbar = false">Close</v-btn>
          </v-snackbar>
        </v-content>
        {% endblock %}
        {% block script_block %}
    <script>
        new Vue({
          el: '#app',
          delimiters: ['{?','?}'],
          loginModal: false,
          created () {
            var url_string = window.location.href
            var url = new URL(url_string)
            var c = url.searchParams.get("q")
            if (c === 'removed') {
              this.snackbarText = 'Removed item from cart'
              this.snackbarColor = 'red'
              this.snackbar = true
            }
          },
          data: function (){
            return {
              hAndM: false,
              americanEagle: false,
              hollister: false,
              clothingTypeDrawer: true,
              genderDrawer: true,
              sizeDrawer: true,
              storesDrawer: true,
              socksType: false,
              priceRange: 0,
              data_test: 'Hello World Test',
              drawer: true,
              snackbar: false,
              snackbarText: '',
              snackbarColor: 'white',
              cart: [
                  {
                      name: ''
                  },
              ],
              items: [
                { title: 'Home', icon: 'dashboard' },
                { title: 'About', icon: 'question_answer' }
              ],
              right: null
              }
            },
            methods: {
              productRoute (itemID) {
                window.location = '/product/' + itemID
              },
              removeFromCart (itemId) {
                console.log(this.productId)
                // this.inCart = false
                body = {"products": [ itemId ]}
                var vueInstance = this
                var csrf = document.getElementsByName('csrfmiddlewaretoken')[0]
                axios.put('/cart/remove/', body, {
                  headers: {"X-CSRFToken": csrf.value }
                }).then(response => {
                  this.snackbarText = 'Removed item from cart'
                  this.snackbarColor = 'red'
                  this.snackbar = true

                  window.location = '/cart/?q=removed'
                })
              }
            }
          })
    </script>
    {% endblock %}

    <style>

    </style>
